---
layout: post
title:  "Domain Driven Design 정리 00: 도메인 모델 시작"
date:   2019-03-11
desc: "Domain Driven Design 정리 00: 도메인 모델 시작"
keywords: "design patterns"
categories: [Programming]
tags: [design patterns]
icon: icon-html
---

# 도메인 모델 시작

<br>

## 도메인

* 소프트웨어로 해결하고자 하는 문제 영역

<br>

![00.png](/static/assets/img/blog/programming/2019-03-11-ddd_00/00.png)

* 하위 도메인으로 나눌 수 있다.
* 하위 도메인은 다른 하위 도메인과 연동하여 완전한 기능을 제공한다.
  * 고객이 물건을 구매하면 주문, 결제, 배송, 혜택 하위 도메인의 기능이 엮인다.
* 특정 도메인을 위한 소프트웨어라고 해서 도메인이 제공해야 할 모든 기능을 구현하는 것은 아니다.
  * ex) 배송 도메인에서 배송 전체 시스템을 구축하는 것이 아닌, 배송 추적만 일부 연동하고 나머지는 외부 업체의 시스템 사용
* 하위 도메인을 어떻게 구성할지 여부는 상황에 따라 달라진다.
  * 기업 고객 대상으로는 온라인으로 카탈로그만 제공하고 주문서만 받는 정도만 필요할 수 있음
  * 일반 고객 대상으로는 카탈로그, 주문, 리뷰 등이 필요할 수 있음
* 도메인마다 고정된 하위 도메인이 존재하는 것이 아님
  * ex) 모든 쇼핑몰이 고객 혜택을 제공하는 것도 아니고, 소규모 업체는 엑셀로 정산을 할 수 있음

<br>

## 도메인 모델

* 정의: 특정 도메인을 개념적으로 표현 
  * ex) "주문 도메인 - 배송지 변경하거나 지불 금액 계산"
  * 도메인 모델을 통해 여러 관계자들이 동일한 모습으로 도메인을 이해하고 도메인 지식을 공유할 수 있다.
* 도메인 모델 표현
  * 클래스 다이어그램: 기능과 도메인의 주요 데이터 구성을 파악하기 용이<br>
![01.png](/static/assets/img/blog/programming/2019-03-11-ddd_00/01.png)

  * 상태 다이어그램: 상태 전이를 쉽게 파악 가능<br>
![02.png](/static/assets/img/blog/programming/2019-03-11-ddd_00/02.png)

* 도메인 모델은 도메인 자체를 이해하기 위한 개념 모델
  * 구현 기술에 맞는 구현 모델은 따로 필요
* 같은 용어라도 하위 도메인마다 의미가 달라질 수 있다.
  * 같은 용어라도 각 하위 도메인이 다루는 영역이 다르므로, 하위 도메인마다 의미가 다를 수 있다.
    * ex) 상품
      * 카탈로그 도메인: 상품 가격, 내용을 담는 정보
      * 배송 도메인: 고객에게 실제 배송되는 물리적인 상품
    * 여러 하위 도메인을 하나의 다이어그램에 표현하면 용어의 의미가 헷갈릴 수 있음
  * 모델의 각 구성요소는 특정 도메인을 한정할 때 비로소 의미가 완전해지므로, 각 하위 도메인마다 별도로 모델을 만든다.

<br>

## 도메인 모델 패턴

* 아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴
  * 아키텍처 구성: 일반적인 애플리케이션 아키텍처는 다음 네 개의 계층으로 구성<br>
  * ![03.png](/static/assets/img/blog/programming/2019-03-11-ddd_00/03.png)
  * 표현: 사용자의 요청을 처리하고, 사용자에게 정보를 보여주는 역할
  * 응용: 사용자가 요청한 기능을 실행. 도메인 로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행
  * 도메인: 시스템이 제공할 도메인의 규칙을 구현
    * 핵심 규칙을 구현한 코드는 도메인 모델에만 위치하므로, 소프트웨어 변경시 다른 코드에 영향을 덜 줄 수 있다.
    * ex) 주문 도메인: '출고 전에 배송지를 변경할 수 있다'와 같은 규칙을 구현한 코드가 도메인 계층에 위치
  * 인프라스트럭처: 데이터베이스나 메시징 시스템과 같은 외부 시스템과의 연동을 처리

